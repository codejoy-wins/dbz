<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>My U.I.</title>
</head>
<body>
    <div id="container">
                    <div id="middle">
                            <div id="content">
                                <div id="goku">
                                    <!-- <h2>Goku's Health: 100</h2> -->
                                </div>
                                    <button id="hide2">Fight</button>
                                <div id="hide">
                                        <h2>Enemy's Power Level: 99</h2>
                                </div>
                            </div>
                    </div>

                    <div id="lower">
                            <div id="now">
                                    <img class="small"src="./goku.jpg" alt="Goku" id="myb">
                            </div>
                            <div id="now2">
                                    <img class="small" src="./freeza.jpeg" alt="Freeza" id="current">
                            </div>
                    </div>

        
    </div>
    <!-- I put the script internally to easily add event listeners -->
    <script>
        document.getElementById("myb").addEventListener('click', myFunc);


        function myFunc(){
            console.log("button presses, my function fired");
            // grab div now and change its id.
            document.getElementById("now").id = "tobe";
            document.getElementById("now2").id = "tobe2";
            document.getElementById("hide").id = "freeza";
            document.getElementById("hide2").id = "newbutton";
            document.getElementById("newbutton").addEventListener('click', Fight);
            DisplayHealth(100);

        }

        function Fight(){
            console.log("attacked");
            var health = document.getElementById('newhealth').innerHTML;
            health-=10;
            document.getElementById('newhealth').innerHTML =health;
            Attack(10);
            if(health <= 0){
                Attack(1000);
            }
            // DisplayHealth(100);
            // lower freeza's health
        }

        function DisplayHealth(n){
            var health = n;
            document.getElementById('freeza').innerHTML = `
                Freeza's Power Level: <div id="newhealth">${health}</div>
            `
        }
        function DisplayHealth2(n,name){
            var health = n;
            document.getElementById('freeza').innerHTML = `
                ${name}'s Power Level: <div id="newhealth">${health}</div>
            `
        }

        function Update(){
            console.log("Update");
            // learn set interval
        }

        function Attack(n){
            console.log(`attacked with ${n} force`);
            if(n==1000){
                console.log("freeza has died");
                Next();
            }
        }

        function Next(){
            // replace freeza with new enemy!
            var enemies = [
                {
                    "name": "freeza",
                    "img": "freeza.jpeg",
                    "health": 102
                },
                {
                    "name": "cell",
                    "img": "cell.jpg",
                    "health": 206
                },
                {
                    "name": "buu",
                    "img": "buu.jpg",
                    "health": 303
                },
                {
                    "name": "dabra",
                    "img": "dabra.png",
                    "health": 180
                }
            ]
            var current = document.getElementById("current");
            console.log(current);
            console.log(current.alt);
            var i = Math.floor(Math.random(0,1)*4);
            current.src= `./${enemies[i].img}`;
            DisplayHealth2(enemies[i].health, enemies[i].name);
            console.log(` New enemy is ${enemies[i].name}`);
            console.log(i);
            if(current.alt == enemies[i].name){
                console.log(`${enemies[i].name} recharged`);
            }
            current.alt = enemies[i].name;
        }
    </script>
</body>
</html>